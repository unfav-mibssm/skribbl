<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=resizes-content">
    <title>Skribbl.io Clone</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen">
        <div class="login-container">
            <div class="logo-section">
                <div class="logo-icon">üé®</div>
                <h1>Skribbl.io21</h1>
                <p class="tagline">Draw, guess, and have fun!</p>
            </div>
            
            <div class="login-box">
                <div class="input-group">
                    <label for="playerName">Your Name</label>
                    <input type="text" id="playerName" placeholder="Enter your name" maxlength="12" autocomplete="off">
                    <span class="input-hint">Max 12 characters</span>
                </div>
                
                <div class="input-group">
                    <label for="roomCode">Room Code</label>
                    <input type="text" id="roomCode" placeholder="Leave empty to create new room" maxlength="8" autocomplete="off">
                    <span class="input-hint">Join existing room or create new</span>
                </div>
                
                <button onclick="joinGame()" class="play-btn">
                    <span class="btn-text">Play Now</span>
                    <span class="btn-icon">üöÄ</span>
                </button>
                
                <div class="login-info">
                    <div class="feature-list">
                        <div class="feature-item">‚úèÔ∏è Real-time drawing</div>
                        <div class="feature-item">üí¨ Live chat</div>
                        <div class="feature-item">üèÜ Score points</div>
                    </div>
                </div>
            </div>
            
            <div class="footer-text">Made with ‚ù§Ô∏è | Free to play</div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="top-left">
                <button class="home-btn" onclick="exitGame()" title="Leave Game">üè†</button>
            </div>
            
            <div class="top-center">
                <div class="game-status">
                    <span class="round-display" id="roundInfo">Round 1 of 10</span>
                    <span class="divider">|</span>
                    <span class="timer-display" id="timerDisplay">80</span>
                </div>
                <div class="word-area">
                    <span class="word-display" id="wordDisplay">Waiting...</span>
                </div>
            </div>
            
            <div class="top-right">
                <span class="room-code-small" id="roomCodeDisplay">----</span>
            </div>
        </div>

        <!-- Main Game Area -->
        <div class="game-area">
            <!-- Canvas Section -->
            <div class="canvas-section">
                <div class="canvas-wrapper">
                    <canvas id="gameCanvas"></canvas>
                    
                    <!-- Drawer Badge -->
                    <div class="drawer-badge" id="drawerBadge">‚úèÔ∏è DRAWING</div>
                    
                    <!-- Waiting Overlay - ONLY FOR NON-DRAWERS -->
                    <div class="waiting-overlay" id="waitingOverlay">
                        <div class="waiting-content">
                            <div class="spinner"></div>
                            <div>Waiting for drawer to choose a word...</div>
                        </div>
                    </div>
                    
                    <!-- Round End Overlay -->
                    <div class="round-overlay" id="roundOverlay">
                        <div class="round-content">
                            <div class="round-title">Round Over!</div>
                            <div class="word-reveal">The word was: <span id="revealedWord">---</span></div>
                            <div class="round-scores" id="roundScores"></div>
                        </div>
                    </div>
                </div>

                <!-- Popups -->
                <div class="popup-overlay" id="popupOverlay"></div>
                <div class="popup color-popup" id="colorPopup">
                    <div class="popup-header">Colors <button class="close-popup" onclick="closePopups()">√ó</button></div>
                    <div class="color-grid" id="colorGrid"></div>
                </div>
                <div class="popup size-popup" id="sizePopup">
                    <div class="popup-header">Size <button class="close-popup" onclick="closePopups()">√ó</button></div>
                    <div class="size-options" id="sizeOptions"></div>
                </div>
            </div>

            <!-- TOOLBAR - MOVED TO MIDDLE -->
            <div class="toolbar-container" id="toolbarContainer">
                <div class="toolbar" id="toolbar">
                    <div class="tool-group">
                        <button class="tool-btn" id="colorBtn" title="Color">
                            <div class="color-preview" id="colorPreview"></div>
                        </button>
                        <button class="tool-btn" id="sizeBtn" title="Size">‚ö´</button>
                        <button class="tool-btn active" id="brushBtn" title="Brush">‚úèÔ∏è</button>
                        <button class="tool-btn" id="eraserBtn" title="Eraser">üßº</button>
                        <button class="tool-btn" id="bucketBtn" title="Fill">ü™£</button>
                        <button class="tool-btn" id="undoBtn" title="Undo">‚Ü©Ô∏è</button>
                        <button class="tool-btn danger" id="clearBtn" title="Clear">üóëÔ∏è</button>
                    </div>
                </div>
            </div>

            <!-- Bottom Section: Players Left, Chat Right -->
            <div class="bottom-section">
                <!-- Players Panel -->
                <div class="players-panel">
                    <div class="panel-header">
                        <span>üë• Players</span>
                        <span id="playerCount">0/8</span>
                    </div>
                    <div class="players-list" id="playersList"></div>
                </div>
                
                <!-- Chat Panel -->
                <div class="chat-panel">
                    <div class="panel-header">
                        <span>üí¨ Chat</span>
                    </div>
                    <div class="chat-messages" id="chatMessages"></div>
                    <div class="chat-input-area" id="chatInputArea">
                        <input type="text" id="chatInput" placeholder="Type your guess here..." maxlength="50" autocomplete="off">
                        <button onclick="sendMessage()" class="send-btn">‚û§</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Word Selection Modal -->
    <div class="modal-overlay" id="wordModal">
        <div class="word-selection">
            <div class="modal-header">
                <h2>Choose a word</h2>
                <div class="modal-timer" id="wordTimer">15</div>
            </div>
            <div class="word-options" id="wordOptions"></div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div class="game-over-modal" id="gameOverModal">
        <div class="game-over-content">
            <div class="trophy" id="winnerTrophy">üèÜ</div>
            <h1>Game Over!</h1>
            <div class="winner-display" id="winnerDisplay"></div>
            <div class="final-scores" id="finalScores"></div>
            <div class="auto-restart-text" id="autoRestartText">New game starts in 10...</div>
            <div class="game-over-actions">
                <button onclick="playAgain()" class="play-again-btn primary">üîÑ Play Now</button>
                <button onclick="location.reload()" class="play-again-btn secondary">üè† Menu</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Connecting...</div>
    </div>

    <!-- Pull to Refresh Indicator -->
    <div class="pull-to-refresh" id="pullToRefresh">
        <div class="pull-spinner">‚Üì</div>
        <div>Pull to refresh</div>
    </div>

    <!-- Audio Elements -->
    <audio id="soundJoin" preload="auto">
        <source src="https://files.catbox.moe/8jc19e.wav" type="audio/wav">
    </audio>
    <audio id="soundCorrect" preload="auto">
        <source src="https://files.catbox.moe/7hoc5m.mp3" type="audio/mpeg">
    </audio>
    <audio id="soundRoundEnd" preload="auto">
        <source src="https://files.catbox.moe/1t26uq.wav" type="audio/wav">
    </audio>
    <audio id="soundLeave" preload="auto">
        <source src="https://files.catbox.moe/zhrjcv.wav" type="audio/wav">
    </audio>
    <audio id="soundEnter" preload="auto">
        <source src="https://files.catbox.moe/y05klm.mp3" type="audio/mpeg">
    </audio>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="words.js"></script>
    <script src="game.js"></script>
</body>
</html>
